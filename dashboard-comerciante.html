<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>DashboardComerciante</title>
	<link rel="preconnect" href="https://fonts.googleapis.com">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link
		href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@100;200;300;400;500;600;700;800&display=swap"
		rel="stylesheet">
	<link href="https://fonts.googleapis.com/css2?family=Manrope:wght@200;300;400;500;600;700;800&display=swap"
		rel="stylesheet">
	<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;500;600;700;800;900&display=swap"
		rel="stylesheet">
	<script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
	<script src="https://code.iconify.design/iconify-icon/3.0.0/iconify-icon.min.js"></script>
	<script src="js/loader.js"></script>
</head>

<body>
	<div id="app-frame">
		<!-- Header -->
		<div
			class="flex items-center justify-between px-6 py-4 border-b border-white/5 z-20 backdrop-blur-sm bg-background/50">
			<div class="flex items-center gap-3">
				<img src="https://randomuser.me/api/portraits/men/32.jpg" alt="Avatar"
					class="size-10 rounded-full border-2 border-primary/50">
				<div>
					<h1 class="text-base font-bold text-foreground font-heading">Panel Comerciante</h1>
					<p class="text-[10px] text-muted-foreground">Administrador</p>
				</div>
			</div>
			<div class="flex items-center gap-2">
				<button onclick="abrirModalNuevoCliente()"
					class="size-9 btn-primary rounded-full !p-0 shadow-lg shadow-blue-500/20">
					<iconify-icon icon="solar:user-plus-bold" class="size-5"></iconify-icon>
				</button>
				<button
					class="size-9 bg-white/5 rounded-full flex items-center justify-center text-muted-foreground hover:text-foreground hover:bg-white/10 transition-colors">
					<iconify-icon icon="solar:settings-bold" class="size-5"></iconify-icon>
				</button>
			</div>
		</div>

		<div class="flex-1 overflow-y-auto pb-24 z-10 content-container pt-6">
			<!-- Local Card -->
			<div class="glass-card p-6 rounded-3xl mb-8 relative overflow-hidden group">
				<div class="absolute inset-0 bg-gradient-to-br from-blue-600/10 to-transparent opacity-50"></div>

				<div class="relative z-10">
					<div class="flex justify-between items-start mb-4">
						<div>
							<h2 class="text-2xl font-bold text-white font-heading mb-1">
								<!-- Placeholder para evitar flash de contenido incorrecto -->
								<span class="animate-pulse bg-white/10 text-transparent rounded">Cargando...</span>
							</h2>
							<p class="text-xs text-blue-200 flex items-center gap-1">
								<iconify-icon icon="solar:map-point-bold" class="size-3"></iconify-icon>
								Centro, Valdivia
							</p>
						</div>
						<div class="bg-white/10 p-2 rounded-xl backdrop-blur-sm text-blue-300">
							<iconify-icon icon="solar:shop-bold" class="size-6"></iconify-icon>
						</div>
					</div>

					<div class="space-y-3">
						<div class="flex items-center justify-between bg-black/20 p-3 rounded-xl border border-white/5">
							<span class="text-xs font-medium text-slate-300">Meta de Sellos</span>
							<span class="text-sm font-bold text-blue-300">10 sellos</span>
						</div>
						<div class="flex items-center justify-between bg-black/20 p-3 rounded-xl border border-white/5">
							<span class="text-xs font-medium text-slate-300">Recompensa</span>
							<span class="text-sm font-bold text-blue-300">Café Gratis</span>
						</div>
					</div>

					<div class="mt-6 flex gap-3">
						<button class="flex-1 btn-primary py-2.5 text-sm">
							<iconify-icon icon="solar:pen-bold" class="size-4"></iconify-icon>
							Editar Tarjeta
						</button>
						<button
							class="flex-1 btn-secondary py-2.5 text-sm bg-white/5 border-white/10 text-white hover:bg-white/10">
							<iconify-icon icon="solar:share-bold" class="size-4"></iconify-icon>
							Compartir
						</button>
					</div>
				</div>
			</div>

			<div class="px-2">
				<div class="flex items-center justify-between mb-4">
					<h3 class="font-bold text-lg text-foreground">Clientes Recientes</h3>
					<button class="text-xs text-primary font-medium hover:text-blue-400 transition-colors">Ver
						todos</button>
				</div>

				<div class="relative mb-6 group">
					<iconify-icon icon="solar:magnifer-linear"
						class="absolute left-3 top-1/2 -translate-y-1/2 text-muted-foreground size-5 group-focus-within:text-primary transition-colors"></iconify-icon>
					<input type="text" placeholder="Buscar cliente..."
						class="w-full bg-white/5 border border-white/10 rounded-xl py-3 pl-10 pr-4 text-sm text-white focus:ring-primary/50 focus:border-primary/50 transition-all placeholder:text-slate-500">
				</div>

				<div class="divide-y divide-white/5" id="lista-clientes">
					<!-- Se llena con JS -->
				</div>

				<div class="mt-8 mb-4 flex justify-center">
					<button id="btn-panic"
						class="text-xs text-red-400 hover:text-red-300 font-medium flex items-center gap-2 px-3 py-2 rounded-lg hover:bg-red-500/10 transition-colors border border-transparent hover:border-red-500/20">
						<iconify-icon icon="solar:restart-bold" class="size-4"></iconify-icon>
						♻️ Restaurar Demo
					</button>
				</div>
			</div>

			<!-- Últimos Movimientos Widget -->
			<div class="glass-card p-5 rounded-3xl mt-6">
				<div class="flex items-center justify-between mb-4">
					<h3 class="font-bold text-foreground">Últimos Movimientos</h3>
					<button onclick="renderizarHistorialAdmin()"
						class="text-primary hover:bg-blue-500/10 p-2 rounded-full transition-colors">
						<iconify-icon icon="solar:refresh-bold" class="size-5"></iconify-icon>
					</button>
				</div>
				<div class="space-y-3" id="lista-transacciones-admin">
					<!-- Se llena con JS -->
					<p class="text-center text-muted-foreground text-sm py-4">Cargando...</p>
				</div>
			</div>
		</div>
	</div>

	<!-- Bottom Navigation -->
	<div
		class="fixed bottom-0 left-0 right-0 bg-slate-950/80 backdrop-blur-xl border-t border-white/5 p-4 z-30 md:absolute md:bottom-0 md:rounded-b-[2rem]">
		<div class="flex justify-around items-center max-w-md mx-auto">
			<button class="flex flex-col items-center gap-1 text-primary">
				<iconify-icon icon="solar:home-2-bold" class="size-6"></iconify-icon>
				<span class="text-[10px] font-bold">Inicio</span>
			</button>
			<button class="flex flex-col items-center gap-1 text-muted-foreground hover:text-primary transition-colors">
				<iconify-icon icon="solar:users-group-rounded-bold" class="size-6"></iconify-icon>
				<span class="text-[10px] font-medium">Clientes</span>
			</button>
			<button class="flex flex-col items-center gap-1 text-muted-foreground hover:text-primary transition-colors">
				<iconify-icon icon="solar:chart-2-bold" class="size-6"></iconify-icon>
				<span class="text-[10px] font-medium">Reportes</span>
			</button>
			<button onclick="window.location.href='configuracion.html'"
				class="flex flex-col items-center gap-1 text-muted-foreground hover:text-primary transition-colors">
				<iconify-icon icon="solar:settings-bold" class="size-6"></iconify-icon>
				<span class="text-[10px] font-medium">Ajustes</span>
			</button>
		</div>
	</div>
	</div>
	<!-- Modal Nuevo Cliente -->
	<div id="modal-nuevo-cliente" class="fixed inset-0 z-50 hidden">
		<div class="absolute inset-0 bg-slate-900/40 backdrop-blur-sm transition-opacity"
			onclick="cerrarModalNuevoCliente()"></div>
		<div
			class="absolute bottom-0 left-0 right-0 p-4 md:relative md:p-0 md:flex md:items-center md:justify-center md:h-full pointer-events-none">
			<div class="bg-white w-full rounded-3xl p-6 shadow-2xl transform transition-all translate-y-full md:translate-y-0 md:max-w-xs pointer-events-auto"
				id="modal-content-cliente">
				<div class="text-center mb-6">
					<div
						class="size-16 bg-primary/10 rounded-full flex items-center justify-center mx-auto mb-4 text-primary">
						<iconify-icon icon="solar:user-plus-bold" class="size-8"></iconify-icon>
					</div>
					<h3 class="text-xl font-bold text-foreground font-heading">Nuevo Cliente</h3>
					<p class="text-sm text-muted-foreground">Ingresa los datos para registrarlo</p>
				</div>

				<div class="space-y-4 mb-6">
					<div>
						<label
							class="block text-xs font-bold text-muted-foreground uppercase tracking-wider mb-1">Nombre</label>
						<input type="text" id="input-nombre-cliente"
							class="w-full bg-muted/50 border border-border rounded-xl px-4 py-3 text-foreground font-medium focus:outline-none focus:ring-2 focus:ring-primary/20"
							placeholder="Ej: Juan Pérez">
					</div>
				</div>

				<div class="flex gap-3">
					<button onclick="cerrarModalNuevoCliente()"
						class="flex-1 py-3 rounded-xl font-bold text-muted-foreground hover:bg-muted transition-colors">
						Cancelar
					</button>
					<button onclick="confirmarNuevoCliente()"
						class="flex-1 bg-primary text-white py-3 rounded-xl font-bold shadow-lg shadow-blue-200 active:scale-95 transition-transform">
						Crear
					</button>
				</div>
			</div>
		</div>
	</div>

	<script src="js/utils.js"></script>
	<script src="js/data.js"></script>
	<script src="js/session.js"></script>
	<script src="js/ui.js"></script>
	<script type="module" src="js/admin.js"></script>
</body>

</html>